costmap_global:
  ros__parameters:
    global_frame: map
    robot_base_frame: base_link
    update_frequency: 1.0
    publish_frequency: 0.5
    transform_tolerance: 1.0  # Increased for GPS delays
    
    # Use SLAM map from rtabmap OR rolling window if no static map
    static_map: false
    rolling_window: true
    width: 50.0
    height: 50.0
    resolution: 0.05
    
    plugins: ["obstacle_layer", "inflation_layer"]

    obstacle_layer:
      plugin: "nav2_costmap_2d::ObstacleLayer"
      enabled: true
      observation_sources: "scan"
      scan:
        topic: "/scan"
        data_type: "LaserScan"
        expected_update_rate: 10.0
        min_obstacle_height: 0.0
        max_obstacle_height: 2.0
        obstacle_range: 12.0
        raytrace_range: 15.0
        clearing: true
        marking: true

    inflation_layer:
      plugin: "nav2_costmap_2d::InflationLayer"
      enabled: true
      cost_scaling_factor: 3.0
      inflation_radius: 0.55
