<?xml version="1.0" encoding="UTF-8"?>
<!--
  ============================================================================
  ROVER ARM SEMANTIC ROBOT DESCRIPTION (SRDF)
  ============================================================================
  This file defines the semantic information for MoveIt planning:
  - Planning groups (kinematic chains)
  - End effectors
  - Named poses for URC missions
  - Collision checking configuration
  ============================================================================
-->
<robot name="rover_arm">
  
  <!-- ======================================================================= -->
  <!-- PLANNING GROUPS                                                         -->
  <!-- ======================================================================= -->
  
  <!-- Main arm planning group (4-DOF kinematic chain) -->
  <group name="arm">
    <chain base_link="base_link" tip_link="tool_flange"/>
  </group>
  
  <!-- ======================================================================= -->
  <!-- END EFFECTOR DEFINITIONS                                                -->
  <!-- ======================================================================= -->
  
  <end_effector name="gripper" parent_link="tool_flange" group="arm"/>
  
  <!-- ======================================================================= -->
  <!-- NAMED POSES FOR URC MISSIONS                                            -->
  <!-- ======================================================================= -->
  
  <!-- Home/Ready Positions -->
  <group_state name="home" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="0.0"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="0.0"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="stow" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-1.5708"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-1.5708"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <!-- Equipment Servicing Mission Poses -->
  <group_state name="es_ready" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-0.7854"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-0.7854"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="es_panel_approach" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-1.0472"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-1.0472"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="es_fine_position" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-0.5236"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-0.5236"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <!-- Science Mission Poses -->
  <group_state name="sc_ready" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-1.2217"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-1.2217"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="sc_ground_survey" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-1.5708"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-1.5708"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="sc_sample_collect" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-0.8727"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-0.8727"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <!-- Delivery Mission Poses -->
  <group_state name="dm_ready" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-0.7854"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-0.7854"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="dm_pickup_approach" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-1.3090"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-1.3090"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <group_state name="dm_pickup_grasp" group="arm">
    <joint name="AB_Rev" value="0.0"/>
    <joint name="AS1_Rev" value="-1.0472"/>
    <joint name="AS2_Rev" value="0.0"/>
    <joint name="AW_Rev" value="-1.0472"/>
    <joint name="AM_Rev" value="0.0"/>
  </group_state>
  
  <!-- ======================================================================= -->
  <!-- COLLISION CHECKING                                                      -->
  <!-- ======================================================================= -->
  
  <!-- Disable collision checking between adjacent links -->
  <disable_collisions link1="base_link" link2="arm_base" reason="Adjacent"/>
  <disable_collisions link1="arm_base" link2="arm_stage1" reason="Adjacent"/>
  <disable_collisions link1="arm_stage1" link2="arm_stage2" reason="Adjacent"/>
  <disable_collisions link1="arm_stage2" link2="arm_wrist" reason="Adjacent"/>
  <disable_collisions link1="arm_wrist" link2="arm_manip" reason="Adjacent"/>
  <disable_collisions link1="arm_manip" link2="tool_flange" reason="Adjacent"/>
  
  <!-- Disable collision checking for links that never collide -->
  <disable_collisions link1="base_link" link2="arm_stage1" reason="Never"/>
  <disable_collisions link1="base_link" link2="arm_stage2" reason="Never"/>
  <disable_collisions link1="base_link" link2="arm_wrist" reason="Never"/>
  <disable_collisions link1="base_link" link2="arm_manip" reason="Never"/>
  <disable_collisions link1="arm_base" link2="arm_stage2" reason="Never"/>
  <disable_collisions link1="arm_base" link2="arm_wrist" reason="Never"/>
  <disable_collisions link1="arm_stage1" link2="arm_wrist" reason="Never"/>
  <disable_collisions link1="arm_stage1" link2="arm_manip" reason="Never"/>
  
  <!-- ======================================================================= -->
  <!-- VIRTUAL JOINTS                                                          -->
  <!-- ======================================================================= -->
  
  <!-- Define base_link as fixed to world for planning -->
  <virtual_joint name="virtual_joint" type="fixed" parent_frame="world" child_link="base_link"/>
  
</robot>

